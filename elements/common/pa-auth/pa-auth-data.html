<html><head></head><body><dom-module id="pa-auth-data"><template><firebase-app auth-domain="{{globalConfig.authDomain}}" database-url="{{globalConfig.databaseUrl}}" api-key="{{globalConfig.apiKey}}"></firebase-app><firebase-auth id="auth" user="{{user}}" status-known="{{statusKnown}}" provider="google"></firebase-auth><firebase-document id="fbDoc" path="{{profileLocation}}" data="{{profile}}"></firebase-document><firebase-query id="todos" app-name="notes" path="{{todosLocation}}" data="{{fbTodos}}"></firebase-query></template><script>class PaAuthData extends Polymer.Element{static get is(){return'pa-auth-data'}static get properties(){return{globalConfig:{type:Object,observer:'_configChanged'},user:{observer:'_userChanged',notify:!0},_firebaseConnected:{value:!1},todos:{type:Array,notify:!0,observer:'_firebaseTodoLoaded'},profile:{type:Object,notify:!0,observer:'_firebaseProfileLoaded'}}}signIn(){console.log('pa-auth-data: signIn'),this.$.auth.signInWithPopup()}signOut(){console.log('pa-auth-data: signOut'),this.user=null,this.$.auth.signOut()}_userChanged(a){a&&(this.todosLocation=[this.location,'todos',this.user.uid].join('/'),this.profileLocation=[this.location,'profile',this.user.uid].join('/'))}_configChanged(){}setDefaultProfile(){this.profile={name:this.user.google.cachedUserProfile.given_name,lastname:this.user.google.cachedUserProfile.family_name,email:'',phone:'',picture:this.user.google.cachedUserProfile.picture,department:'',job:'',office:'',room:'',notification:{message:!0,invitation:!0,changes:!1,login:!1,weekly:!0,daily:!1}}}_firebaseProfileLoaded(){this.set('profile',this.profile),this.profile||this.setDefaultProfile()}_firebaseTodoLoaded(){this._firebaseConnected=!0,this.todos=this.fbTodos,this.linkPaths('fbTodos','todos')}}window.customElements.define(PaAuthData.is,PaAuthData);</script></dom-module></body></html>